<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dashboard Integration</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-results { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; border-left: 4px solid #28a745; }
        .warning { background: #fff3cd; border-left: 4px solid #ffc107; }
        .error { background: #f8d7da; border-left: 4px solid #dc3545; }
    </style>
</head>
<body>
    <h1>Dashboard Integration Test</h1>
    <div id="test-results"></div>
    
    <script>
        // Mock DOM elements that the app expects
        function createMockDashboard() {
            const dashboard = document.createElement('div');
            dashboard.id = 'dashboard';
            dashboard.innerHTML = `
                <div id="total-cards" data-stat="total-cards">0</div>
                <div id="studied-today" data-stat="studied-today">0</div>
                <div id="accuracy" data-stat="accuracy">0%</div>
                <div id="streak" data-stat="streak">0</div>
                <div id="study-time" data-stat="study-time">0m</div>
                <div id="total-progress" data-stat="total-progress">0%</div>
            `;
            document.body.appendChild(dashboard);
        }
        
        function createMockElements() {
            // Create form elements
            const deckForm = document.createElement('div');
            deckForm.innerHTML = `
                <input type="text" id="deck-name" value="Test Deck">
                <textarea id="deck-description">Test Description</textarea>
                <input type="checkbox" id="deck-public">
                <button id="create-deck-btn">Create Deck</button>
                
                <select id="flashcard-deck">
                    <option value="">Select Deck</option>
                </select>
                <textarea id="flashcard-front">Test Front</textarea>
                <textarea id="flashcard-back">Test Back</textarea>
                <button id="create-flashcard-btn">Create Flashcard</button>
            `;
            document.body.appendChild(deckForm);
        }
        
        function runTests() {
            const results = document.getElementById('test-results');
            
            try {
                createMockDashboard();
                createMockElements();
                
                // Test 1: Check if dashboard elements exist
                const totalCards = document.getElementById('total-cards');
                const studiedToday = document.getElementById('studied-today');
                
                if (totalCards && studiedToday) {
                    results.innerHTML += '<div class="test-results success">‚úÖ Dashboard elements found</div>';
                } else {
                    results.innerHTML += '<div class="test-results error">‚ùå Dashboard elements missing</div>';
                }
                
                // Test 2: Check localStorage for existing data
                const existingDecks = JSON.parse(localStorage.getItem('studyingflash_decks') || '[]');
                const existingCards = JSON.parse(localStorage.getItem('studyingflash_flashcards') || '[]');
                
                results.innerHTML += `<div class="test-results">üìä Current data: ${existingDecks.length} decks, ${existingCards.length} flashcards</div>`;
                
                // Test 3: Check if the app would update stats correctly
                if (totalCards) {
                    totalCards.textContent = existingCards.length;
                    results.innerHTML += '<div class="test-results success">‚úÖ Statistics can be updated</div>';
                }
                
            } catch (error) {
                results.innerHTML += `<div class="test-results error">‚ùå Test error: ${error.message}</div>`;
            }
        }
        
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>